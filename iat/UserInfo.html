{{ block title }}
    Etapa 1: Encuesta, información personal.
{{ endblock }}

{% block styles  %}
    <link href="{% static 'iat.css' %}" rel="stylesheet"/>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }
        h1 {
            text-align: center;
            color: #333;
            margin-top: 20px;
        }
        form {
            max-width: 600px;
            margin: 40px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }
        input[type="text"], input[type="number"] {
            width: calc(100% - 20px);
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        input[type="checkbox"] {
            margin-top: 5px;
        }
        button {
            display: block;
            width: 100%;
            padding: 10px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 10px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .form-section {
            margin-bottom: 20px;
        }
        .checkbox-group div {
            margin-bottom: 10px;
        }
        input[type="radio"] {
            margin-right: 10px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-size: 16px;
            color: #333;
        }

    </style>
{% endblock %}

{{ block content }}
    {{ formfield 'edad' }}
    {{ formfield 'sexo' }}
    {{ formfield 'ha_participado' }}

    <div id="div_num_experimentos"
         style="display: {% if player.field_maybe_none('ha_participado') == 'Sí' %}block{% else %}none{% endif %};">
        {{ formfield 'num_experimentos' }}
    </div>

    {{ next_button }}
{{ endblock }}

{% block scripts %}
<script>
  (function() {
    // Encuentra el <select> y el div que lo envuelve
    const select = document.querySelector('select[name="ha_participado"]');
    const divNum = document.getElementById('div_num_experimentos');

    function toggleNumField() {
      if (select.value === 'Sí') {
        divNum.style.display = 'block';
      } else {
        divNum.style.display = 'none';
        // Opcional: limpiar el valor si se oculta
        const input = divNum.querySelector('input');
        if (input) { input.value = ''; }
      }
    }

    // Al cambiar la opción, alterna visibilidad
    select.addEventListener('change', toggleNumField);

    // Al cargar la página, ajusta visibilidad según el valor inicial
    toggleNumField();
  })();
</script>
{% endblock %}
