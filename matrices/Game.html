{{ block title }}
Captcha page
{{ endblock }}

{{ block content }}
<div class="d-flex flex-column align-items-center">
    <img class="captcha m-1" id="captcha-img">
    <p>Count symbol "{{Constants.counted_char}}" symbol in the matrix.</p>
    <input type="text" id="answer-inp" class="form-control m-1" placeholder="enter text from the captcha and press Enter">
</div>

<script>
    let image = document.getElementById('captcha-img');
    let input = document.getElementById('answer-inp');
    input.onkeydown = function (ev) {
        if (ev.key === 'Enter') submit();
    }

    document.addEventListener("DOMContentLoaded", (event) => {
        liveSend({start: true});
    });

    function liveRecv(data) {
        image.src = data.image;
        input.value = "";
    }

    function submit() {
        liveSend({answer: input.value});
    }
</script>
{{ endblock }}